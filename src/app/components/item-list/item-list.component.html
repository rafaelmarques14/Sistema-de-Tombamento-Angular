<div class="header">
  <h2>Gestão de Itens</h2>
  <button mat-flat-button color="primary" (click)="openItemDialog()">
    <mat-icon>add</mat-icon>
    Novo Item
  </button>
</div>

<div class="table-container mat-elevation-z8">
  <table mat-table [dataSource]="itens">

    <ng-container matColumnDef="item">
      <th mat-header-cell *matHeaderCellDef> Item </th>
      <td mat-cell *matCellDef="let item">
        <div class="item-cell">
          <mat-icon color="primary">devices</mat-icon>
          <div>
            <strong>{{ item.nomeDoItem }}</strong>
            <small>{{ item.marca }} - {{ item.modelo }}</small>
          </div>
        </div>
      </td>
    </ng-container>
    <ng-container matColumnDef="tombamento">
      <th mat-header-cell *matHeaderCellDef> Tombamento </th>
      <td mat-cell *matCellDef="let item"> {{ item.numeroDeTombamento }} </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let item">
        <mat-chip-listbox>
          <mat-chip [ngClass]="getStatusClass(item.status)">{{ item.status }}</mat-chip>
        </mat-chip-listbox>
      </td>
    </ng-container>
    <ng-container matColumnDef="atribuidoPara">
      <th mat-header-cell *matHeaderCellDef> Atribuído Para </th>
      <td mat-cell *matCellDef="let item"> {{ getFuncionarioNome(item.funcionarioId) }} </td>
    </ng-container>

    <ng-container matColumnDef="acoes">
      <th mat-header-cell *matHeaderCellDef class="text-right"> Ações </th>
      <td mat-cell *matCellDef="let item" class="actions-cell">
        <ng-container [ngSwitch]="item.status">
          <button *ngSwitchCase="'Livre'" mat-stroked-button color="primary" (click)="atribuirItem(item)">
            Atribuir
          </button>
          <button *ngSwitchCase="'Em uso'" mat-stroked-button color="accent" (click)="desatribuirItem(item)">
            Desatribuir
          </button>
        </ng-container>

        <button mat-icon-button color="primary" (click)="openItemDialog(item)" title="Editar Item">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="deleteItem(item)" title="Excluir Item">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>